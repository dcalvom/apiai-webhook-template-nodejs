'use strict';

var flatten  = require('./flatten.js'),
  similarity = require('./similarity.js');


// Utility function to sort the profiles based on distance
var profileSort = function (p1, p2) {
  return p2.distance-p1.distance;
};

var careers = [ 
                {name: 'Ingeniería de Software', profile:'{"word_count":810,"processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.9867110981846289,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.7042244945380862},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.1557318101201695},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.0004775464009734165},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.5860591077793186},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9708467654376544},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.7881762863345365}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.8464004187848182,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.6166307928148312},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.5378546297875639},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.28701650794256417},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.30684326434651055},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.5838476682352428},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.8141184765810173}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.11339069434334831,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9393356087286564},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.9009131122550671},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.004088684838736034},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.1617447565663867},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.0318054510531533},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.02777561094726083}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.00026689409373858997,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.06646473139165465},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.3884227801625663},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.05279838770289802},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.18968380904715287},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.12064074937665858},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.7465809362782673}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.981363151579203,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.3266451486268873},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.16738825367873789},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.8788063201814946},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.12371914716342647},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.854805523980981},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.29289366993381744}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.5985106329854919},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.003070442386736816},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.957822884301855},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.20907988136283112},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.015907073290338303},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.44441612240215445},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.7228386574845952},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.004601171200627641},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.890389903162075},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.09350284791539143},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.06799588428081721},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.97138756542073}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.006256872479651121},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.7344124403781345},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.014820999110266242},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.12003959377077439},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.18970985747514868}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":1},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":0},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":0},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":1}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":1},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":1},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":0},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":0},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":1},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":0},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":1},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":0}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":0}]}],"warnings":[]}'},
                {name: 'Ciencias de la Computación', profile:'{"word_count":363,"word_count_message":"There were 363 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates","processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.9956102613179796,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.708089495012607},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.9321729359138398},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.2088327135079195},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.9471049161448118},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9990104100606408},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.9996919397133505}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.7521567761037627,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.7143723325004212},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.8513719531175238},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.2389924756732555},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.11030660195610709},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.1273523419326839},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.9363943749812099}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.041425763202059596,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9482899181660858},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.8468114530931603},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.0003823745978576709},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.5056894159195727},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.044037158698814416},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.008181823292478352}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.0007859103295427827,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.5426949694863672},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.26978964932584226},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.06584932479673333},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.01141680174637344},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.7705440170703222},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.9737958464860884}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.6021634539899698,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.5845594174033019},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.8647767915109384},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.9796885059459333},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.03652764210916748},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.9795318287097018},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.7567013199692915}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.16335292725546247},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.0011341290945328097},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.9837624315771927},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.07715606151979926},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.0113272002417511},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.15403950623487472},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.15906655489751054},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.055872707948011635},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.1326942385260666},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.0141636875607965},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.04528820847015752},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.5579015400377624}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.013167800728171863},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.577024313341783},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.00337673262661653},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.38277713928292384},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.29459622886622616}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":1},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":0},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":0},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":1}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":1},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":1},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":1},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":1}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":1},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":0},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":0}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":1}]}],"warnings":[{"warning_id":"WORD_COUNT_MESSAGE","message":"There were 363 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates"}]}'},
                {name: 'Ingeniería de Tecnologías de la Información', profile:'{"word_count":385,"word_count_message":"There were 385 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates","processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.8436103258605383,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.8777165421829962},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.2894662771711348},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.010066048037850495},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.2597540753699014},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9953238724189852},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.9967799846709577}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.7515278079856802,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.9109616399339606},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.6827384409026529},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.1519701271873155},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.029152418011545778},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.5179318978935887},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.9821318956696306}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.4065290507405635,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9953145370980001},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.9718767899423282},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.061282084602703735},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.507110189930027},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.43622889119936864},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.05268733315034335}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.023941933540550686,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.026402178786195385},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.27877553564895396},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.0007279035206256834},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.008210268501279094},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.14778280070041916},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.9945949009038484}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.6633677476028637,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.7249183587076085},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.6181504093436209},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.6907168395311606},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.3989895654161259},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.8041910818086337},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.5773166680429451}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.9927795947439191},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.0044355035116828145},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.9732986340359431},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.149824620738787},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.021156276115152695},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.43373639262373476},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.40581858501543233},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.14636686496844253},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.6810956651640381},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.0028153130323969044},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.07602983491380122},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.9586769944447544}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.014924740195826292},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.6263727898641392},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.014316166591212542},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.5165631234774409},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.3117991264282918}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":1},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":0.5},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":1},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":1},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":1},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":1},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":0},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":1},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":1},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":1},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":0}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":1}]}],"warnings":[{"warning_id":"WORD_COUNT_MESSAGE","message":"There were 385 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates"}]}'}];

module.exports = {
  /**
   * Calculate the euclidean distance between a profile and careers
   * @param  {Object} profile   the profile object
   * @param  {Int} type the type of distances being calculated
   * @return {Array} careers and distances
   */
  calculateDistances: function(profile, type) {
    return careers.map(function(career) {
      var ret = {
        emphasis: career.name,
        distance: similarity(profile, career.profile, type)//,
        //profile: flatten.traits(career.profile, type)
      };
      return ret;
    }).sort(profileSort);
  }
};