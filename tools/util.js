'use strict';

var flatten  = require('./flatten.js'),
  similarity = require('./similarity.js');


// Utility function to sort the profiles based on distance
var profileSort = function (p1, p2) {
  return p2.distance-p1.distance;
};

var careers = [ 
                {name: 'Agricultural Consultant', profile: '{"word_count":578,"word_count_message":"There were 578 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates","processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.9221268608915545,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.9005655489589582},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.5487766937010158},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.01285872686927575},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.6108338229068355},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9797440781488178},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.9846847763002218}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.42470810223853395,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.9484617421781182},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.8184127774529197},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.1824538149704985},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.2722845107637638},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.805653009566804},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.9868871566979209}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.42893205520279337,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9925046809378418},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.9966094039132445},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.14543215550175465},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.7398817845321288},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.18474769933831436},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.11443215527779771}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.0187299343850284,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.27282277213491196},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.4125301626863359},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.019140088472757},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.0658955103370657},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.45239316074221136},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.9749669622559092}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.4418536680351433,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.20354886709770942},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.269550401857087},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.5835622609442396},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.00826595038300837},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.39104162309530505},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.18204844780614504}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.3953059230839347},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.30097205958365936},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.8784673873739306},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.24004231412550692},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.12873172998746985},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.06813216661886468},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.2545662310042879},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.5535988317400284},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.47045412094463945},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.19947455760397415},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.4665371001193738},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.6220812551235925}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.005969055249065658},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.8040704393561611},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.03100797713181136},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.32108857037188787},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.22988365970115004}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":1},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":0},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":0},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":1}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":0}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":1},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":1},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":1},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":1},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":1}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":1},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":1},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":1}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":1}]}],"warnings":[{"warning_id":"WORD_COUNT_MESSAGE","message":"There were 578 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates"}]}'},
                {name: 'Academic Librarian', profile: '{"word_count":496,"word_count_message":"There were 496 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates","processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.8719683907859719,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.8391202751331969},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.5157815243818559},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.057209435754554894},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.6026605107746252},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9704912747072854},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.9955224526692283}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.3588275512036405,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.9581106706138497},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.7353431021609234},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.12201972488332585},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.016206361212076692},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.6150961421073808},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.9739615699123072}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.30440469088401306,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9976452530611668},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.9914260704216596},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.10030231913503607},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.6105072733987661},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.1881749996034307},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.07153111756415975}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.022297665044100412,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.3387171694864426},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.353638658169099},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.02341995359639093},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.06073402618046814},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.6043190891544354},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.9895142718332677}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.303543797251018,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.4861189756165191},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.6611999965612183},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.7921855039877719},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.052960105907080335},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.5903906283598385},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.5502237136197605}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.6580660055072065},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.3465189437648062},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.9543087035211439},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.2409292600519113},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.20505988229992395},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.20235482930672144},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.3845045614104679},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.580066361655476},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.48295723966201914},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.1355953536717206},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.7128025724787902},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.6334642369316654}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.0054067227128514195},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.8072939731829486},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.030946890615904332},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.2819967534500206},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.5550796862380911}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":1},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":0},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":0},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":1}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":0}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":1},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":1},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":1},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":1},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":1},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":0.5},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":0},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":1}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":1}]}],"warnings":[{"warning_id":"WORD_COUNT_MESSAGE","message":"There were 496 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates"}]}'},
                {name: 'Software Developer', profile: '{"word_count":255,"word_count_message":"There were 255 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates","processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.7238074761576567,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.9222607731293171},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.07843791235996067},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.0024985917600315877},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.7187118650895619},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9645419435155962},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.9620575786542842}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.5141545584529187,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.934222101890926},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.548665624466986},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.16881558807748215},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.08421369819727492},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.7346072227080301},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.9647735108262009}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.2605511844317252,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9944314598473056},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.9869389564672639},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.16733293981232855},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.7881489834049353},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.11756378960641323},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.1582737548029775}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.015423285367081874,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.09742551206279565},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.31328141142690336},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.03164533236093692},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.05625904096354972},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.2380550816497542},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.9924848452709752}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.4752291889064889,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.4510036617092764},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.45401673559932554},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.8753148013184765},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.0353515309461187},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.7119893341504012},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.41611945556976077}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.9678809511064412},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.2745761397338867},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.9438401133170393},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.4485595969645335},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.26616052145231217},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.5067309168312197},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.839753807795039},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.4988896514636971},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.9252217538101039},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.3307852947352231},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.579888085032508},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.9622999894191588}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.037257359217062525},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.7833736176326207},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.048229469905494426},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.4282330460019807},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.6191035454591957}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":1},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":1},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":0}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":1}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":1},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":1},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":1},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":0},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":0},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":0},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":0},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":1},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":0}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":0}]}],"warnings":[{"warning_id":"WORD_COUNT_MESSAGE","message":"There were 255 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates"}]}'},
                {name: 'Auditor', profile: '{"word_count":228,"word_count_message":"There were 228 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates","processed_language":"en","personality":[{"trait_id":"big5_openness","name":"Openness","category":"personality","percentile":0.6707344582546151,"children":[{"trait_id":"facet_adventurousness","name":"Adventurousness","category":"personality","percentile":0.4747491917394528},{"trait_id":"facet_artistic_interests","name":"Artistic interests","category":"personality","percentile":0.1636866745297877},{"trait_id":"facet_emotionality","name":"Emotionality","category":"personality","percentile":0.016572895984729274},{"trait_id":"facet_imagination","name":"Imagination","category":"personality","percentile":0.5651503779748187},{"trait_id":"facet_intellect","name":"Intellect","category":"personality","percentile":0.9806062604854864},{"trait_id":"facet_liberalism","name":"Authority-challenging","category":"personality","percentile":0.9551266682321675}]},{"trait_id":"big5_conscientiousness","name":"Conscientiousness","category":"personality","percentile":0.7032430450159255,"children":[{"trait_id":"facet_achievement_striving","name":"Achievement striving","category":"personality","percentile":0.9078291489446704},{"trait_id":"facet_cautiousness","name":"Cautiousness","category":"personality","percentile":0.45483801335951674},{"trait_id":"facet_dutifulness","name":"Dutifulness","category":"personality","percentile":0.13827178807503576},{"trait_id":"facet_orderliness","name":"Orderliness","category":"personality","percentile":0.09438284173711858},{"trait_id":"facet_self_discipline","name":"Self-discipline","category":"personality","percentile":0.6010291393167277},{"trait_id":"facet_self_efficacy","name":"Self-efficacy","category":"personality","percentile":0.981457440469484}]},{"trait_id":"big5_extraversion","name":"Extraversion","category":"personality","percentile":0.6842018417784266,"children":[{"trait_id":"facet_activity_level","name":"Activity level","category":"personality","percentile":0.9368035187572321},{"trait_id":"facet_assertiveness","name":"Assertiveness","category":"personality","percentile":0.9941986100651437},{"trait_id":"facet_cheerfulness","name":"Cheerfulness","category":"personality","percentile":0.15114670164118543},{"trait_id":"facet_excitement_seeking","name":"Excitement-seeking","category":"personality","percentile":0.7420870062728224},{"trait_id":"facet_friendliness","name":"Outgoing","category":"personality","percentile":0.18948176052584498},{"trait_id":"facet_gregariousness","name":"Gregariousness","category":"personality","percentile":0.2088448895706732}]},{"trait_id":"big5_agreeableness","name":"Agreeableness","category":"personality","percentile":0.2576936742360601,"children":[{"trait_id":"facet_altruism","name":"Altruism","category":"personality","percentile":0.1292014862290966},{"trait_id":"facet_cooperation","name":"Cooperation","category":"personality","percentile":0.16187913348841182},{"trait_id":"facet_modesty","name":"Modesty","category":"personality","percentile":0.021282021459753164},{"trait_id":"facet_morality","name":"Uncompromising","category":"personality","percentile":0.1558616591379835},{"trait_id":"facet_sympathy","name":"Sympathy","category":"personality","percentile":0.41146106091536877},{"trait_id":"facet_trust","name":"Trust","category":"personality","percentile":0.816279050296105}]},{"trait_id":"big5_neuroticism","name":"Emotional range","category":"personality","percentile":0.6138716628461973,"children":[{"trait_id":"facet_anger","name":"Fiery","category":"personality","percentile":0.49142336617843185},{"trait_id":"facet_anxiety","name":"Prone to worry","category":"personality","percentile":0.4155745018840286},{"trait_id":"facet_depression","name":"Melancholy","category":"personality","percentile":0.7957145560307144},{"trait_id":"facet_immoderation","name":"Immoderation","category":"personality","percentile":0.05132022659477098},{"trait_id":"facet_self_consciousness","name":"Self-consciousness","category":"personality","percentile":0.6070971108576679},{"trait_id":"facet_vulnerability","name":"Susceptible to stress","category":"personality","percentile":0.3974464829842539}]}],"needs":[{"trait_id":"need_challenge","name":"Challenge","category":"needs","percentile":0.9452421836940078},{"trait_id":"need_closeness","name":"Closeness","category":"needs","percentile":0.2812898018338454},{"trait_id":"need_curiosity","name":"Curiosity","category":"needs","percentile":0.9058822023826851},{"trait_id":"need_excitement","name":"Excitement","category":"needs","percentile":0.3708324932607492},{"trait_id":"need_harmony","name":"Harmony","category":"needs","percentile":0.2319214653809254},{"trait_id":"need_ideal","name":"Ideal","category":"needs","percentile":0.6083558383217049},{"trait_id":"need_liberty","name":"Liberty","category":"needs","percentile":0.6449936142279252},{"trait_id":"need_love","name":"Love","category":"needs","percentile":0.46097435820924537},{"trait_id":"need_practicality","name":"Practicality","category":"needs","percentile":0.829363243275225},{"trait_id":"need_self_expression","name":"Self-expression","category":"needs","percentile":0.3122588634061572},{"trait_id":"need_stability","name":"Stability","category":"needs","percentile":0.47193029603374975},{"trait_id":"need_structure","name":"Structure","category":"needs","percentile":0.7742375288014895}],"values":[{"trait_id":"value_conservation","name":"Conservation","category":"values","percentile":0.011709135429145368},{"trait_id":"value_openness_to_change","name":"Openness to change","category":"values","percentile":0.7962275110966246},{"trait_id":"value_hedonism","name":"Hedonism","category":"values","percentile":0.23846722043750224},{"trait_id":"value_self_enhancement","name":"Self-enhancement","category":"values","percentile":0.2624001987699722},{"trait_id":"value_self_transcendence","name":"Self-transcendence","category":"values","percentile":0.6469008976142174}],"consumption_preferences":[{"consumption_preference_category_id":"consumption_preferences_shopping","name":"Purchasing Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_automobile_ownership_cost","name":"Likely to be sensitive to ownership cost when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_automobile_safety","name":"Likely to prefer safety when buying automobiles","score":0},{"consumption_preference_id":"consumption_preferences_clothes_quality","name":"Likely to prefer quality when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_style","name":"Likely to prefer style when buying clothes","score":1},{"consumption_preference_id":"consumption_preferences_clothes_comfort","name":"Likely to prefer comfort when buying clothes","score":0},{"consumption_preference_id":"consumption_preferences_influence_brand_name","name":"Likely to be influenced by brand name when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_utility","name":"Likely to be influenced by product utility when making product purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_influence_online_ads","name":"Likely to be influenced by online ads when making product purchases","score":1},{"consumption_preference_id":"consumption_preferences_influence_social_media","name":"Likely to be influenced by social media when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_influence_family_members","name":"Likely to be influenced by family when making product purchases","score":0},{"consumption_preference_id":"consumption_preferences_spur_of_moment","name":"Likely to indulge in spur of the moment purchases","score":0.5},{"consumption_preference_id":"consumption_preferences_credit_card_payment","name":"Likely to prefer using credit cards for shopping","score":1}]},{"consumption_preference_category_id":"consumption_preferences_health_and_activity","name":"Health & Activity Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_eat_out","name":"Likely to eat out frequently","score":1},{"consumption_preference_id":"consumption_preferences_gym_membership","name":"Likely to have a gym membership","score":1},{"consumption_preference_id":"consumption_preferences_outdoor","name":"Likely to like outdoor activities","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_environmental_concern","name":"Environmental Concern Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_concerned_environment","name":"Likely to be concerned about the environment","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_entrepreneurship","name":"Entrepreneurship Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_start_business","name":"Likely to consider starting a business in next few years","score":1}]},{"consumption_preference_category_id":"consumption_preferences_movie","name":"Movie Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_movie_romance","name":"Likely to like romance movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_adventure","name":"Likely to like adventure movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_horror","name":"Likely to like horror movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_musical","name":"Likely to like musical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_historical","name":"Likely to like historical movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_science_fiction","name":"Likely to like science-fiction movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_war","name":"Likely to like war movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_drama","name":"Likely to like drama movies","score":0},{"consumption_preference_id":"consumption_preferences_movie_action","name":"Likely to like action movies","score":1},{"consumption_preference_id":"consumption_preferences_movie_documentary","name":"Likely to like documentary movies","score":1}]},{"consumption_preference_category_id":"consumption_preferences_music","name":"Music Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_music_rap","name":"Likely to like rap music","score":1},{"consumption_preference_id":"consumption_preferences_music_country","name":"Likely to like country music","score":0.5},{"consumption_preference_id":"consumption_preferences_music_r_b","name":"Likely to like R&B music","score":1},{"consumption_preference_id":"consumption_preferences_music_hip_hop","name":"Likely to like hip hop music","score":1},{"consumption_preference_id":"consumption_preferences_music_live_event","name":"Likely to attend live musical events","score":1},{"consumption_preference_id":"consumption_preferences_music_playing","name":"Likely to have experience playing music","score":0},{"consumption_preference_id":"consumption_preferences_music_latin","name":"Likely to like Latin music","score":1},{"consumption_preference_id":"consumption_preferences_music_rock","name":"Likely to like rock music","score":0},{"consumption_preference_id":"consumption_preferences_music_classical","name":"Likely to like classical music","score":0.5}]},{"consumption_preference_category_id":"consumption_preferences_reading","name":"Reading Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_read_frequency","name":"Likely to read often","score":0},{"consumption_preference_id":"consumption_preferences_books_entertainment_magazines","name":"Likely to read entertainment magazines","score":0},{"consumption_preference_id":"consumption_preferences_books_non_fiction","name":"Likely to read non-fiction books","score":1},{"consumption_preference_id":"consumption_preferences_books_financial_investing","name":"Likely to read financial investment books","score":1},{"consumption_preference_id":"consumption_preferences_books_autobiographies","name":"Likely to read autobiographical books","score":0}]},{"consumption_preference_category_id":"consumption_preferences_volunteering","name":"Volunteering Preferences","consumption_preferences":[{"consumption_preference_id":"consumption_preferences_volunteer","name":"Likely to volunteer for social causes","score":1}]}],"warnings":[{"warning_id":"WORD_COUNT_MESSAGE","message":"There were 228 words in the input. We need a minimum of 600, preferably 1,200 or more, to compute statistically significant estimates"}]}'}];

module.exports = {
  /**
   * Calculate the euclidean distance between a profile and careers
   * @param  {Object} profile   the profile object
   * @param  {Int} type the type of distances being calculated
   * @return {Array} careers and distances
   */
  calculateDistances: function(profile, type) {
    return careers.map(function(career) {
      var ret = {
        user: career.name,
        distance: similarity(profile, career.profile, type)//,
        //profile: flatten.traits(career.profile, type)
      };
      return ret;
    }).sort(profileSort);
  }
};